<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All The Fishes</title>
    <script src="https://pixijs.download/release/pixi.js"></script>
</head>
<body>

<script>

    //The App
    var app = new PIXI.Application({
        width:1020,
        height:760,
        transparent: true,
    });
    
    //Background
    const bg = PIXI.Sprite.from("img/underwater_background.jpg");
        bg.x = 0;//-500;
        bg.y = 0;//-500;
    app.stage.addChild(bg);
    
    //Add view to the document
    document.body.appendChild(app.view);

    //My first Sprite
    let fish1 = PIXI.Sprite.from("img/fish_1.png");
        fish1.x = -200;
        fish1.y = 0;
        fish1.angle = 0;
        fish1.scale.set(.4);
        fish1.anchor.set(.5);

    app.stage.addChild(fish1);

    //My second Sprite
    let fish2 = PIXI.Sprite.from("img/fish_2.png");
        fish2.x = 220;
        fish2.y = 0;
        fish2.angle = 0;
        fish2.scale.set(.4);
        fish2.anchor.set(.5);

    app.stage.addChild(fish2);

    //My third Sprite
    let fish3 = PIXI.Sprite.from("img/fish_3.png");
        fish3.x = 10;
        fish3.y = 200;
        fish3.angle = 0;
        fish3.scale.set(.4);
        fish3.anchor.set(.5);

    app.stage.addChild(fish3);

    //My fourth Sprite
    let fish4 = PIXI.Sprite.from("img/fish_4.png");
        fish4.x = 150;
        fish4.y = 350;
        fish4.angle = 0;
        fish4.scale.set(.4);
        fish4.anchor.set(.5);

    app.stage.addChild(fish4);

    //My fifth Sprite
    let fish5 = PIXI.Sprite.from("img/fish_5.png");
        fish5.x = 150;
        fish5.y = 100;
        fish5.angle = 0;
        fish5.scale.set(.4);
        fish5.anchor.set(.5);

    app.stage.addChild(fish5);


    //My Container
    var my_container = new PIXI.Container();
    my_container.addChild(fish1);
    my_container.addChild(fish2);
    my_container.x = 510;
    my_container.y = 500;

    app.stage.addChild(my_container);

    //Animation Loop!
    function animationLoop() {
        
        //fish1.y -= 1;
        //fish2.y += 1;
        //fish1.angle += 1;

        let time = Date.now();

        let wobble1 = Math.sin(time/1000)*20;
        let wobble2 = Math.sin(time/700)*20;

        fish1.y = wobble1;
        fish2.y = wobble2;

        let swimBy1 = (time/10)%1500;
        fish3.x = 1250 - swimBy1;

        let swimBy2 = (time/10)%1500;
        fish4.x = swimBy2;

        let tintedFish = Math.round(time/20) * 0xFF00FF;
        fish5.tint = tintedFish;

        setTimeout(animationLoop, 1000/30);
    }

    animationLoop();

</script>    

</body>
</html>